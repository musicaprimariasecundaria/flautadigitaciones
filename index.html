<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digitaciones de Flauta Dulce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .font-handwriting {
            font-family: 'Caveat', cursive;
        }
    </style>
    <!-- Babel for JSX compilation in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Import Map for React -->
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client"
  }
}
</script>
</head>
<body class="bg-slate-900 text-white">
    <div id="root"></div>
    
    <script type="text/babel" data-type="module">
        import React, { useState, useRef, useEffect, useCallback } from 'react';
        import ReactDOM from 'react-dom/client';

        // --- Inlined from constants.ts ---
        // Fingering array: [thumb, 1, 2, 3, 4, 5, 6, 7]
        // true = closed, false = open
        const FINGERING_DATA = [
            {
                id: 'c4',
                name: 'Do',
                pitch: 'C4',
                fingering: [true, true, true, true, true, true, true, true],
                staffDetails: { position: 0 }
            },
            {
                id: 'd4',
                name: 'Re',
                pitch: 'D4',
                fingering: [true, true, true, true, true, true, true, false],
                staffDetails: { position: 1 }
            },
            {
                id: 'e4',
                name: 'Mi',
                pitch: 'E4',
                fingering: [true, true, true, true, true, true, false, false],
                staffDetails: { position: 2 }
            },
            {
                id: 'f4',
                name: 'Fa',
                pitch: 'F4',
                fingering: [true, true, true, true, true, false, false, false],
                staffDetails: { position: 3 }
            },
            {
                id: 'f-sharp-4',
                name: 'Fa♯',
                pitch: 'F#4',
                fingering: [true, true, true, true, false, true, true, true],
                staffDetails: { position: 3, accidental: 'sharp' }
            },
            {
                id: 'g4',
                name: 'Sol',
                pitch: 'G4',
                fingering: [true, true, true, true, false, false, false, false],
                staffDetails: { position: 4 }
            },
            {
                id: 'g-sharp-4',
                name: 'Sol♯',
                pitch: 'G#4',
                fingering: [true, true, true, false, true, true, true, false],
                staffDetails: { position: 4, accidental: 'sharp' }
            },
            {
                id: 'a4',
                name: 'La',
                pitch: 'A4',
                fingering: [true, true, true, false, false, false, false, false],
                staffDetails: { position: 5 }
            },
            {
                id: 'b-flat-4',
                name: 'Si♭',
                pitch: 'Bb4',
                fingering: [true, true, false, true, true, false, false, false],
                staffDetails: { position: 6, accidental: 'flat' }
            },
            {
                id: 'b4',
                name: 'Si',
                pitch: 'B4',
                fingering: [true, true, false, false, false, false, false, false],
                staffDetails: { position: 6 }
            },
            {
                id: 'c5',
                name: 'Do5',
                pitch: 'C5',
                fingering: [true, false, true, false, false, false, false, false],
                staffDetails: { position: 7 }
            },
            {
                id: 'd5',
                name: 'Re5',
                pitch: 'D5',
                fingering: [false, false, true, false, false, false, false, false],
                staffDetails: { position: 8 }
            },
            {
                id: 'e5',
                name: 'Mi5',
                pitch: 'E5',
                fingering: [false, true, true, true, true, true, false, false],
                staffDetails: { position: 9 }
            },
        ];

        // --- Inlined from components/Icons.tsx ---
        const PlayIcon = ({className}) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="currentColor" 
                className={className}
            >
                <path d="M8 5v14l11-7z" />
            </svg>
        );

        const PauseIcon = ({className}) => (
             <svg 
                xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="currentColor" 
                className={className}
            >
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
            </svg>
        );

        // --- Inlined from components/Recorder.tsx ---
        const Hole = ({ cx, cy, isClosed }) => {
            const fill = isClosed ? 'rgb(51 65 85)' : '#fff';
            const stroke = isClosed ? 'rgb(51 65 85)' : 'rgb(71 85 105)';
            return <circle cx={cx} cy={cy} r="10" fill={fill} stroke={stroke} strokeWidth="2" />;
        };

        const Recorder = ({ fingering }) => {
            const [thumb, h1, h2, h3, h4, h5, h6, h7] = fingering;

            return (
                <svg viewBox="0 0 100 500" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <pattern id="woodGrain" patternUnits="userSpaceOnUse" width="100" height="20" >
                            <image href="https://www.transparenttextures.com/patterns/wood-pattern.png" x="0" y="0" width="100" height="20" />
                        </pattern>
                        <linearGradient id="recorderGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style={{ stopColor: '#8c5a2b', stopOpacity: 1 }} />
                            <stop offset="50%" style={{ stopColor: '#a97d42', stopOpacity: 1 }} />
                            <stop offset="100%" style={{ stopColor: '#8c5a2b', stopOpacity: 1 }} />
                        </linearGradient>
                    </defs>
                    
                    <g transform="translate(10, 0)">
                        {/* Main Body */}
                        <rect x="25" y="20" width="30" height="460" rx="15" fill="url(#recorderGradient)" />
                        <rect x="25" y="20" width="30" height="460" rx="15" fill="url(#woodGrain)" opacity="0.2"/>
                        <rect x="23" y="20" width="34" height="460" rx="17" fill="none" stroke="rgba(0,0,0,0.2)" strokeWidth="1"/>

                        {/* Mouthpiece */}
                        <path d="M 20 5 C 20 -5, 60 -5, 60 5 L 60 40 L 20 40 Z" fill="#d2b48c" stroke="#a17b50" strokeWidth="2" />
                        <rect x="32" y="15" width="16" height="10" fill="#6b4a23" rx="2" />

                        {/* Bell */}
                        <path d="M 20 480 C 20 500, 60 500, 60 480 L 20 480 Z" fill="#8c5a2b" stroke="#6b4a23" strokeWidth="1"/>

                        {/* Rings */}
                        <rect x="20" y="40" width="40" height="8" rx="4" fill="#d2b48c" stroke="#a17b50" strokeWidth="1.5"/>
                        <rect x="20" y="150" width="40" height="8" rx="4" fill="#d2b48c" stroke="#a17b50" strokeWidth="1.5"/>
                        <rect x="20" y="280" width="40" height="8" rx="4" fill="#d2b48c" stroke="#a17b50" strokeWidth="1.5"/>

                        {/* Holes */}
                        <Hole cx={15} cy={90} isClosed={thumb} />
                        <Hole cx={40} cy={90} isClosed={h1} />
                        <Hole cx={40} cy={125} isClosed={h2} />
                        <Hole cx={40} cy={175} isClosed={h3} />
                        <Hole cx={40} cy={210} isClosed={h4} />
                        <Hole cx={40} cy={250} isClosed={h5} />
                        <Hole cx={40} cy={305} isClosed={h6} />
                        <Hole cx={40} cy={355} isClosed={h7} />
                    </g>
                </svg>
            );
        };

        // --- Inlined from components/MusicalStaff.tsx ---
        const MusicalStaff = ({ staffDetails, isCompact = false }) => {
            const { position, accidental } = staffDetails;
            const viewboxHeight = 120;
            const viewboxWidth = 200;
            const staffY = viewboxHeight / 2;
            const lineSpacing = 10;
            const noteY = staffY + lineSpacing * 5 - position * (lineSpacing / 2);
            
            const trebleClefPath = "M 45.4,63.4 C 45,65.3 42.6,67.6 40.2,67.6 C 37.1,67.6 35,65.7 35,62.8 C 35,59.8 37.5,57.8 40,57.8 C 42.1,57.8 43.8,58.9 44.5,60.6 L 44.5,60.6 L 44.5,42 C 44.5,42 45,28.5 35.8,24.1 C 28.5,20.5 25.1,28.3 25.1,36.1 C 25.1,43.2 29.2,48.2 33.1,50.6 C 37.3,53.2 41,51.8 41,51.8 L 40.5,48.3 C 40.5,48.3 38.1,49.1 35.8,47.7 C 33.3,46.1 31.1,43.2 31.1,39.3 C 31.1,35.7 32.5,32.4 35.8,32.4 C 39.2,32.4 39.5,36.3 39.5,40.1 L 39.5,62.5 C 39.5,67.6 35.8,70.6 32.1,70.6 C 27.6,70.6 24.1,66.8 24.1,61.9 C 24.1,57.3 27.5,53.7 32,53.7 C 34.1,53.7 36,54.4 37.3,55.5 L 38.1,52.3 C 38.1,52.3 31,49.1 21.8,58.3 C 15.8,64.6 19.3,77.3 28.5,80.9 C 36.3,84 43.1,78.9 45.9,71.3 L 45.9,71.3 L 46.5,71.3 C 49.3,71.3 51.5,69.2 51.5,66.3 C 51.5,63.4 49.3,61.2 46.5,61.2 C 45.7,61.2 45.4,61.4 45.4,61.4 L 45.4,63.4 Z";

            return (
                <svg viewBox={`0 0 ${viewboxWidth} ${viewboxHeight}`} width={isCompact ? "100" : "150"} className="drop-shadow-lg">
                    {[...Array(5)].map((_, i) => (
                        <line
                            key={i}
                            x1="10"
                            y1={staffY + i * lineSpacing}
                            x2={viewboxWidth - 10}
                            y2={staffY + i * lineSpacing}
                            stroke="rgb(100 116 139)"
                            strokeWidth="1.5"
                        />
                    ))}

                    <g transform="scale(0.8) translate(-10, -5)">
                        <path d={trebleClefPath} fill="white" />
                    </g>
                    
                    {position === 0 && (
                         <line x1="95" y1={noteY} x2="125" y2={noteY} stroke="white" strokeWidth="1.5" />
                    )}
                    
                    <g transform={`translate(110, ${noteY}) rotate(-15)`}>
                         <ellipse cx="0" cy="0" rx="6.5" ry="5" fill="white" />
                    </g>
                    
                    {accidental === 'sharp' && <text x="90" y={noteY + 5} fontSize="24" fill="white">♯</text>}
                    {accidental === 'flat' && <text x="90" y={noteY + 8} fontSize="28" fill="white" fontWeight="bold">♭</text>}
                </svg>
            );
        };
        
        // --- Inlined from components/FingeringChart.tsx ---
        const FingeringChart = ({ note, isActive = false, isCompact = false }) => {
            const activeClasses = isActive ? 'border-lime-400 ring-2 ring-lime-400/30 shadow-lime-400/20' : 'border-slate-700';

            return (
                <div className={`bg-slate-800/50 rounded-2xl h-full flex flex-col items-center justify-center border shadow-2xl shadow-slate-950/50 transition-all duration-300 ${activeClasses} ${isCompact ? 'p-3 sm:p-4' : 'p-6 sm:p-8'}`}>
                    <div className={`w-full flex items-center justify-around ${isCompact ? 'flex-col gap-2 text-center' : 'flex-col lg:flex-row gap-8'}`}>
                        <div className="flex flex-col items-center">
                            <MusicalStaff staffDetails={note.staffDetails} isCompact={isCompact} />
                             <h2 className={`font-bold text-white ${isCompact ? 'text-2xl mt-2' : 'text-4xl sm:text-5xl mt-4'}`}>{note.name}</h2>
                             <p className={`text-slate-400 ${isCompact ? 'text-base' : 'text-xl'}`}>{note.pitch}</p>
                        </div>
                        <div className={isCompact ? 'w-16 sm:w-20' : 'w-24 sm:w-28 md:w-24 lg:w-28'}>
                             <Recorder fingering={note.fingering} />
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- Inlined from components/NoteSelector.tsx ---
        const NoteSelector = ({ notes, selectedNote, onSelectNote }) => {
            return (
                <div className="bg-slate-800/50 rounded-2xl p-4 border border-slate-700">
                    <h3 className="text-xl font-bold text-lime-300 mb-4 px-2">Notas Musicales</h3>
                    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-2 gap-2">
                        {notes.map((note) => (
                            <button
                                key={note.name}
                                onClick={() => onSelectNote(note)}
                                className={`
                                    p-3 rounded-lg text-center font-semibold transition-all duration-200
                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-lime-400
                                    ${selectedNote.name === note.name
                                        ? 'bg-lime-400 text-slate-900 shadow-lg scale-105'
                                        : 'bg-slate-700 text-slate-200 hover:bg-slate-600'
                                    }
                                `}
                            >
                                {note.name}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };
        
        // --- Inlined from components/PracticeMode.tsx ---
        const PITCH_FREQUENCIES = {
            'C4': 261.63, 'D4': 293.66, 'E4': 329.63, 'F4': 349.23, 'F#4': 369.99,
            'G4': 392.00, 'G#4': 415.30, 'A4': 440.00, 'Bb4': 466.16, 'B4': 493.88,
            'C5': 523.25, 'D5': 587.33, 'E5': 659.25,
        };

        const PracticeMode = () => {
            const [selectedNotes, setSelectedNotes] = useState([]);
            const [isPlaying, setIsPlaying] = useState(false);
            const [tempo, setTempo] = useState(80);
            const [timeSignature, setTimeSignature] = useState(4);
            const [activeNoteIndex, setActiveNoteIndex] = useState(null);
            const [beat, setBeat] = useState(null);
            const [isCountingIn, setIsCountingIn] = useState(false);

            const audioContextRef = useRef(null);
            const intervalRef = useRef(null);
            const playerStateRef = useRef({ isPlaying, isCountingIn, activeNoteIndex, selectedNotes, timeSignature });

            useEffect(() => {
                playerStateRef.current = { isPlaying, isCountingIn, activeNoteIndex, selectedNotes, timeSignature };
            });

            const handleToggleNote = useCallback((note) => {
                if (isPlaying) return;
                setSelectedNotes(prev => {
                    const isSelected = prev.some(n => n.id === note.id);
                    if (isSelected) {
                        return prev.filter(n => n.id !== note.id);
                    }
                    if (prev.length < 4) {
                        return [...prev, note];
                    }
                    return prev;
                });
            }, [isPlaying]);

            const playSound = useCallback((currentBeat, note) => {
                if (!audioContextRef.current) return;
                const context = audioContextRef.current;
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();

                let freq = 440.0;
                let gain = 0.3;
                if (note) { // Playing a musical note
                    freq = PITCH_FREQUENCIES[note.pitch] || 440.0;
                } else { // Counting in
                    freq = currentBeat === 0 ? 880.0 : 660.0;
                    gain = 0.2;
                }
                
                oscillator.frequency.setValueAtTime(freq, context.currentTime);
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(gain, context.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, context.currentTime + 0.15);

                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                oscillator.start(context.currentTime);
                oscillator.stop(context.currentTime + 0.15);
            }, []);

            useEffect(() => {
                if (isPlaying && selectedNotes.length > 0) {
                    if (!audioContextRef.current) {
                        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    audioContextRef.current.resume();

                    setActiveNoteIndex(0);
                    setIsCountingIn(true);
                    setBeat(-1); 

                    let beatCounter = -1;

                    const tick = () => {
                        const { isCountingIn: countingIn, activeNoteIndex: noteIndex, selectedNotes: notes, timeSignature: currentSignature } = playerStateRef.current;
                        
                        beatCounter = (beatCounter + 1) % currentSignature;
                        setBeat(beatCounter);

                        if (countingIn) {
                            playSound(beatCounter, null);
                            if (beatCounter === currentSignature - 1) {
                                setIsCountingIn(false);
                            }
                        } else {
                            if (noteIndex !== null && notes[noteIndex]) {
                                playSound(beatCounter, notes[noteIndex]);
                            }
                            if (beatCounter === currentSignature - 1) {
                                setActiveNoteIndex(prev => ((prev ?? -1) + 1) % notes.length);
                            }
                        }
                    };
                    
                    const intervalTime = (60 / tempo) * 1000;
                    intervalRef.current = window.setInterval(tick, intervalTime);

                } else {
                    if (intervalRef.current) {
                        clearInterval(intervalRef.current);
                        intervalRef.current = null;
                    }
                    if (isPlaying) setIsPlaying(false);
                    setActiveNoteIndex(null);
                    setBeat(null);
                    setIsCountingIn(false);
                }

                return () => {
                    if (intervalRef.current) clearInterval(intervalRef.current);
                };
            }, [isPlaying, tempo, selectedNotes, playSound, timeSignature]);


            return (
                <main className="w-full max-w-7xl flex-grow flex flex-col gap-8">
                    <div className="bg-slate-800/50 rounded-2xl p-4 border border-slate-700">
                        <div className="flex justify-between items-center mb-4 px-2">
                            <h3 className="text-xl font-bold text-lime-300">
                                1. Selecciona hasta 4 notas
                            </h3>
                            {selectedNotes.length > 0 && (
                                <button 
                                    onClick={() => setSelectedNotes([])}
                                    disabled={isPlaying}
                                    className="bg-red-500 text-white font-semibold py-1 px-3 rounded-lg hover:bg-red-600 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    Limpiar
                                </button>
                            )}
                        </div>
                        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-7 gap-2">
                            {FINGERING_DATA.map((note) => {
                                const isSelected = selectedNotes.some(n => n.id === note.id);
                                const isMax = selectedNotes.length >= 4 && !isSelected;
                                return (
                                <button
                                    key={note.id}
                                    onClick={() => handleToggleNote(note)}
                                    disabled={isMax || isPlaying}
                                    className={`
                                        p-3 rounded-lg text-center font-semibold transition-all duration-200
                                        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-lime-400
                                        ${isSelected
                                            ? 'bg-lime-400 text-slate-900 shadow-lg scale-105'
                                            : 'bg-slate-700 text-slate-200 hover:bg-slate-600'
                                        }
                                        ${isMax || isPlaying ? 'opacity-50 cursor-not-allowed' : ''}
                                    `}
                                >
                                    {note.name}
                                </button>
                            )})}
                        </div>
                    </div>

                    <div className="flex-grow bg-slate-800/50 rounded-2xl p-4 sm:p-6 border border-slate-700 flex flex-col">
                         <h3 className="text-xl font-bold text-lime-300 mb-4 px-2">
                            2. Ajusta y empieza
                        </h3>
                        {selectedNotes.length > 0 ? (
                            <div className="flex flex-col flex-grow items-center justify-center gap-6">
                                <div className="w-full max-w-2xl flex flex-col items-center gap-y-4 gap-x-6 bg-slate-900/50 p-4 rounded-xl border border-slate-700 sm:flex-row">
                                    <button
                                        onClick={() => setIsPlaying(!isPlaying)}
                                        className="p-3 bg-lime-400 text-slate-900 rounded-full hover:bg-lime-300 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-lime-400 shrink-0"
                                        aria-label={isPlaying ? 'Pausar metrónomo' : 'Iniciar metrónomo'}
                                    >
                                        {isPlaying ? <PauseIcon className="w-8 h-8"/> : <PlayIcon className="w-8 h-8"/>}
                                    </button>
                                    <div className="w-full flex items-center gap-3">
                                        <span className="text-lg font-bold text-white w-24 text-center">{tempo} BPM</span>
                                        <input
                                            type="range"
                                            min="40"
                                            max="200"
                                            step="1"
                                            value={tempo}
                                            onChange={(e) => setTempo(Number(e.target.value))}
                                            className="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                            disabled={isPlaying}
                                        />
                                    </div>
                                    <div className="flex items-center justify-center gap-2 bg-slate-800 p-1 rounded-lg border border-slate-700 shrink-0">
                                        {[2, 3, 4].map(beats => (
                                            <button
                                                key={beats}
                                                onClick={() => setTimeSignature(beats)}
                                                disabled={isPlaying}
                                                className={`px-4 py-1 rounded-md text-sm font-semibold transition-colors ${
                                                    timeSignature === beats
                                                        ? 'bg-lime-400 text-slate-900'
                                                        : 'bg-slate-700 text-slate-200 hover:bg-slate-600'
                                                } disabled:opacity-50 disabled:cursor-not-allowed`}
                                            >
                                                {beats}/4
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                
                                <div className="w-full flex items-center justify-center gap-4 h-8">
                                   {[...Array(timeSignature)].map((_, i) => {
                                        const isActive = beat === i;
                                        let color = 'bg-slate-600';
                                        if (isActive) {
                                            if (isCountingIn) {
                                                color = beat === 0 ? 'bg-yellow-500' : 'bg-yellow-400';
                                            } else {
                                                color = beat === 0 ? 'bg-lime-400' : 'bg-slate-300';
                                            }
                                        }
                                        return <div key={i} className={`w-4 h-4 rounded-full transition-colors duration-150 ${color}`}></div>;
                                    })}
                                </div>

                                <div className="w-full flex justify-center mt-4">
                                    <div className="flex flex-row flex-nowrap gap-4 overflow-x-auto p-2 -mx-2">
                                        {selectedNotes.map((note, index) => (
                                            <div key={note.id} className="w-32 sm:w-36 flex-shrink-0">
                                                <FingeringChart note={note} isActive={index === activeNoteIndex} isCompact={true} />
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                 <div className="w-full text-center mt-6">
                                    <p className="text-slate-400 text-sm italic">
                                        Puedes practicar tocando negras repetidas, blancas o redondas, según compás.
                                    </p>
                                </div>
                            </div>
                        ) : (
                            <div className="flex-grow flex items-center justify-center">
                                <p className="text-slate-400 text-lg">Selecciona notas en el panel de arriba para empezar.</p>
                            </div>
                        )}
                    </div>
                </main>
            );
        };
        
        // --- Inlined from App.tsx ---
        const App = () => {
            const [mode, setMode] = useState('learn');
            const [selectedNote, setSelectedNote] = useState(FINGERING_DATA[0]);

            const buttonBaseClasses = "w-full text-center font-semibold py-2 px-4 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-lime-400";
            const activeButtonClasses = "bg-lime-400 text-slate-900 shadow-lg";
            const inactiveButtonClasses = "bg-slate-700 text-slate-200 hover:bg-slate-600";

            return (
                <div className="min-h-screen bg-slate-900 text-slate-100 flex flex-col items-center p-4 sm:p-6 lg:p-8">
                    <header className="w-full max-w-5xl text-center mb-6">
                        <h1 className="text-4xl sm:text-5xl md:text-6xl font-handwriting font-bold text-lime-300">
                            Digitaciones de Flauta Dulce
                        </h1>
                        <p className="text-slate-400 mt-2 text-base sm:text-lg">
                            Una guía interactiva para aprender y practicar.
                        </p>
                    </header>

                    <div className="w-full max-w-sm mx-auto mb-8 p-1 bg-slate-800 rounded-xl flex justify-center gap-2 border border-slate-700">
                        <button 
                            onClick={() => setMode('learn')} 
                            className={`${buttonBaseClasses} ${mode === 'learn' ? activeButtonClasses : inactiveButtonClasses}`}
                            aria-pressed={mode === 'learn'}
                        >
                            Modo Aprendizaje
                        </button>
                        <button 
                            onClick={() => setMode('practice')} 
                            className={`${buttonBaseClasses} ${mode === 'practice' ? activeButtonClasses : inactiveButtonClasses}`}
                            aria-pressed={mode === 'practice'}
                        >
                            Modo Práctica
                        </button>
                    </div>

                    {mode === 'learn' ? (
                        <main className="w-full max-w-5xl flex-grow flex flex-col md:flex-row gap-8">
                            <aside className="w-full md:w-1/3 lg:w-1/4">
                                 <NoteSelector
                                    notes={FINGERING_DATA}
                                    selectedNote={selectedNote}
                                    onSelectNote={setSelectedNote}
                                />
                            </aside>
                            <section className="w-full md:w-2/3 lg:w-3/4 flex-grow">
                                <FingeringChart note={selectedNote} />
                            </section>
                        </main>
                    ) : (
                        <PracticeMode />
                    )}

                     <footer className="w-full max-w-5xl mt-12 text-center text-slate-500">
                        <p>Diseñado para estudiantes de música.</p>
                     </footer>
                </div>
            );
        };

        // --- Inlined from index.tsx ---
        const rootElement = document.getElementById('root');
        if (!rootElement) {
          throw new Error("Could not find root element to mount to");
        }

        const root = ReactDOM.createRoot(rootElement);
        root.render(
          <React.StrictMode>
            <App />
          </React.StrictMode>
        );

    </script>
</body>
</html>